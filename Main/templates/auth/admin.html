{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Admin Panel{% endblock %}</h1>
{% endblock %}

{% block content %}
    <h2>User Management</h2>
    <table border="1" cellpadding="5">
        <tr>
            <th>Username</th>
            <th>Admin</th>
            <th>Actions</th>
        </tr>
        {% for u in users %}
        <tr>
            <td>{{ u.username }}</td>
            <td>{{ 'Yes' if u.is_admin else 'No' }}</td>
            <td>
                <form method="POST" style="display:inline;">
                    <input type="hidden" name="username" value="{{ u.username }}">
                    <button name="action" value="delete">Delete</button>
                    {% if not u.is_admin %}
                        <button name="action" value="make_admin">Make Admin</button>
                    {% else %}
                        <button name="action" value="remove_admin">Remove Admin</button>
                    {% endif %}
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

    <br>
    <a href="{{ url_for('auth.home') }}">Back to Home</a>
{% endblock %}